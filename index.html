<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Evenz seatingchart</title>

    <!-- dynamicvenuemaps.com -->
    <link rel="stylesheet" href="https://dynamicvenuemaps.com/maps/css/style_maps.css" />
    <script src="https://dynamicvenuemaps.com/maps/js/jquery.min.js?v=1.9.1"></script>
    
    <!-- Our code -->
    <script src="js/socket.io.js"></script>
    <script src="js/socket_seatmap_client.js"></script>

</head>

    <body>
        <!-- dynamicvenuemaps.com -->
        <div id="seatmap-container"></div>

        <!-- dynamicvenuemaps.com -->
        <script>
            var DATA_TICKTES = {
                "list": []
            };

            var DVM_map_params = {
                'client_id'             : '158',
                'map_name'              : 'seatmap-container',
                'key_map_name'          : null,
                'tickets_container'     : null,
                'map_width'             : 777,
                'map_height'            : 637,
                'feed_type'             : 'te',
                'map_type'              : 'price',
                'event_id'              : '1413508',
                'headliner_id'          : '30584',
                'venue_id'              : '1480',
                'venue_conf'            : '20651',
                'tickets_data_object'   : DATA_TICKTES,
                'tickets_type'          : 'json',
                'static_map'            : ''
            };
        </script>

        <!-- dynamicvenuemaps.com -->
        <script src="https://dynamicvenuemaps.com/maps/dvm.js?v=1.0"></script>

        <!-- Our code -->
        <script>
            class Stadium {

                static setSeatmap(ticketList) {
                    DATA_TICKTES.list = ticketList;
                }

                // How to call a function for drawing colored sections on top of an empty stadium?
                static updateSeatmap() {

                    // ... call function from api dynamicvenuemaps.com

                    // As I understand it is required to call a function from a js-file:
                    // https://dynamicvenuemaps.com/maps/dvm.js?v=1.0
                    // But I dont find it.
                }

            }


            // After each sorting, the list of tickets will be different 
            let ticketList = [
                { "id": "1858306", "price": "72.0", "section": "PR15", "row": "4", "avail": "2", "qty": "2", "notes": "rien" },
                { "id": "1858302", "price": "76.0", "section": "PR15", "row": "3", "avail": "2", "qty": "2", "notes": "rien" }, 
                { "id": "1858298", "price": "113.0", "section": "PR15", "row": "1", "avail": "2", "qty": "2", "notes": "rien" }, 
                { "id": "1858295", "price": "87.0", "section": "PR15", "row": "3", "avail": "2,4", "qty": "4", "notes": "rien" }, 
                { "id": "1858293", "price": "87.0", "section": "PR15", "row": "2", "avail": "2", "qty": "2", "notes": "rien" }, 
                { "id": "1858215", "price": "83.0", "section": "PR14", "row": "4", "avail": "2", "qty": "2", "notes": "rien" }, 
                { "id": "1845517", "price": "117.0", "section": "PR13", "row": "1", "avail": "2,4", "qty": "4", "notes": "rien" }
            ];

            // And after each sorting I need change the value of the "var DATA_TICKTES = ..."
            Stadium.setSeatmap(ticketList); 

            // After that I need to update the map with new ticketList
            Stadium.updateSeatmap();

        </script>

    </body>

</html>